/**
 * Coerces a data-bound value (typically a string) to a number.
 */
export function coerceNumberProperty(
  value: unknown,
  fallbackValue = 0,
): number {
  return _isNumberValue(value) ? Number(value) : fallbackValue;
}

/**
 * Checks whether the provided value is considered a number.
 * @docs-private
 */
export function _isNumberValue(value: unknown): boolean {
  // parseFloat(value) handles most of the cases we're interested in (it treats null, empty string,
  // and other non-number values as NaN, where Number just uses 0) but it considers the string
  // '123hello' to be a valid number. Therefore we also check if Number(value) is NaN.
  return !isNaN(parseFloat(value as string)) && !isNaN(Number(value));
}

export type NumberInput = string | number | null | undefined;
