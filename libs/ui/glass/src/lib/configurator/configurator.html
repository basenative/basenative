<div class="configurator-container">
  <!-- Controls Panel -->
  <div class="panel-controls">
    <div class="token-groups">
      @for (group of Object.keys(flatTokens()); track group) {
        <article class="group">
          <h3>{{ group | titlecase }}</h3>
          @for (token of flatTokens()[group]; track token.name) {
            <div class="token-row">
              <div class="input-wrapper" [class.color]="token.type === 'color'">
                @if (token.type === 'color') {
                  <label
                    input-wrapper
                    [label]="token.name.split('-').pop() || '' | titlecase"
                  >
                    <div
                      class="color-control-group"
                      style="
                        display: flex;
                        gap: var(--space-2);
                        align-items: center;
                      "
                    >
                      <div
                        class="color-preview"
                        [style.background]="token.value"
                        style="
                          width: 24px;
                          height: 24px;
                          border-radius: 50%;
                          border: 1px solid var(--color-border-glass);
                        "
                      ></div>
                      <input
                        [id]="token.cssVar"
                        type="color"
                        [value]="token.value"
                        (input)="update(token.cssVar, $event)"
                        class="color-picker-input"
                        style="opacity: 0; position: absolute; width: 0"
                      />
                      <input
                        type="text"
                        [value]="token.value"
                        (input)="update(token.cssVar, $event)"
                      />
                    </div>
                  </label>
                } @else {
                  <label
                    input-wrapper
                    [label]="token.name.split('-').pop() || '' | titlecase"
                  >
                    <input
                      [id]="token.cssVar"
                      type="text"
                      [value]="token.value"
                      (input)="update(token.cssVar, $event)"
                    />
                  </label>
                }
              </div>
            </div>
          }
        </article>
      }
    </div>
  </div>

  <!-- Live Preview Stage -->
  <!-- Live Preview Stage -->
  <div class="panel-preview">
    <!-- Static Preview Container -->
    <div class="preview-content">
      <div class="preview-sticky">
        <h2>Live Playground</h2>
        <p class="subtitle">
          Interact with components to see your token changes in real-time.
        </p>

        <!-- Button Showcase -->
        <section class="showcase-section">
          <h4>Buttons</h4>
          <div class="component-row">
            <button variant="primary">Primary</button>
            <button variant="secondary">Secondary</button>
            <button variant="ghost">Ghost</button>
            <button variant="danger">Danger</button>
          </div>
        </section>

        <!-- Typography Showcase -->
        <section class="showcase-section">
          <h4>Typography</h4>
          <div class="typography-sample">
            <h1>Heading 1</h1>
            <p>
              The quick brown fox jumps over the lazy dog.
              <a href="#">Link Style</a>
            </p>
            <div class="text-muted">Muted text sample for contrast check.</div>
          </div>
        </section>

        <!-- Card Showcase -->
        <section class="showcase-section">
          <h4>Surfaces & Cards</h4>
          <article class="sample-card">
            <header>
              <h5>Card Title</h5>
            </header>
            <p>This card inherits surface, border, and spacing tokens.</p>
            <footer>
              <button variant="primary" size="sm">Action</button>
            </footer>
          </article>
        </section>
      </div>
    </div>
  </div>
</div>
